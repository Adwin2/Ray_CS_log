##### Chapter9 基于共享变量的并发

### 9.1 竞争条件
> *对于两个goroutine中的事件x和y 无法确认先后发生顺序 那么说事件x和y是并发的*
> -  一个函数在线性程序中可以正确工作 在并发情况下依旧可以正确工作的情况下 称该函数是并发安全的
> 并发安全的函数 不需要额外的同步工作 
> - 一个类型可访问的所有方法和操作函数都是并发安全的话 称该类型是并发安全的
> 并发访问类型的方法是危险的行为
> 但包导出函数一般都是并发安全的 （package级别的变量无法被限制在单一的goroutine 修改必须使用互斥条件
**竞争条件指的是程序在多个goroutine交叉执行操作时出现错误。**
特殊情况才会触发 难以复现和分析诊断

两个goroutine并发访问同一个变量，且其中至少一个写操作时候会发生数据竞争 竞争对象是比一个机器字更大的类型时更麻烦

有三种方式可以避免数据竞争：

第一种方法是不要去写变量。考虑一下下面的map，会被“懒”填充，也就是说在每个key被第一次请求到的时候才会去填值。如果Icon是被顺序调用的话，这个程序会工作很正常，但如果Icon被并发调用，那么对于这个map来说就会存在数据竞争。
